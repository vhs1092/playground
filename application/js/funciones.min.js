function ver_mensaje(e,a){var r="",t="";switch(a){case"exito":r="success",t="Exito";break;case"advertencia":r="warning",t="Advertencia";break;case"error":r="danger",t="Error";break;default:r="danger",t="Error"}var n='<div class="alert alert-'+r+' alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><strong>&#161;'+t+"!</strong></br>"+e+"</div>";return n}function AbrirAlerta(e,a,r){jQuery.fancybox('<div class="content_msg">'+e+"</div>",{height:a,width:r,autoSize:!1})}function cerrar_fancy(){$.fancybox.close(!0)}function validateEmail(e){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(e)}function validar_caracter(e,a){switch(tecla=document.all?e.keyCode:e.which,a){case 0:if(8==tecla||32==tecla||0==tecla)return!0;patron=/[A-Za-z]/;break;case 1:if(8==tecla||0==tecla)return!0;patron=/\d/;break;case 2:if(8==tecla||0==tecla||46==tecla)return!0;patron=/\d/;break;case 3:if(8==tecla||0==tecla||46==tecla){if(46==tecla&&0==punto)return punto=1,!0;if(8==tecla||0==tecla)return!0}patron=/\d/;break;case 4:if(8==tecla||0==tecla)return!0;patron=/[A-Za-z]/;break;default:if(8==tecla||32==tecla||0==tecla)return!0;patron=/[A-Za-z]/}return tecla_final=String.fromCharCode(tecla),patron.test(tecla_final)}function utf8_encode(e){e=e.replace(/\r\n/g,"\n");for(var a="",r=0;r<e.length;r++){var t=e.charCodeAt(r);128>t?a+=String.fromCharCode(t):t>127&&2048>t?(a+=String.fromCharCode(t>>6|192),a+=String.fromCharCode(63&t|128)):(a+=String.fromCharCode(t>>12|224),a+=String.fromCharCode(t>>6&63|128),a+=String.fromCharCode(63&t|128))}return a}function encode(e){var a,r,t,n,i,o,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",u="",d=0;for(e=utf8_encode(e);d<e.length;)a=e.charCodeAt(d++),r=e.charCodeAt(d++),t=e.charCodeAt(d++),n=a>>2,i=(3&a)<<4|r>>4,o=(15&r)<<2|t>>6,s=63&t,isNaN(r)?o=s=64:isNaN(t)&&(s=64),u=u+c.charAt(n)+c.charAt(i)+c.charAt(o)+c.charAt(s);return u}function verificar_sesion(){var e=localStorage.usuario_id;void 0!=e?jQuery.ajax({url:"verificar_sesion",type:"post",data:{usuario_id:e},dataType:"text",success:function(e){var a=JSON.parse(e);switch(a.res){case 0:localStorage.usuario_id=void 0,window.location="http://www.innerorbitstudios.com/hector/enmicasa2/";break;case 1:break;case 2:localStorage.usuario_id=void 0,window.location="http://www.innerorbitstudios.com/hector/enmicasa2/";break;default:localStorage.usuario_id=void 0,window.location="http://www.innerorbitstudios.com/hector/enmicasa2/"}},error:function(e){}}):window.location="http://www.innerorbitstudios.com/hector/enmicasa2/"}function cerrar_sesion(){var e=localStorage.usuario_id;if(void 0!=e){var a="";jQuery.ajax({url:"cerrar_sesion",type:"post",data:{usuario_id:e},dataType:"text",success:function(e){switch(parseInt(e.res)){case 0:localStorage.usuario_id=void 0,a=NaN;break;case 1:localStorage.usuario_id=void 0,window.location="http://www.innerorbitstudios.com/hector/enmicasa2/";break;default:localStorage.usuario_id=void 0,window.location="http://www.innerorbitstudios.com/hector/enmicasa2/"}jQuery("#div_mensaje").html(a)},error:function(e){}})}else window.location=window.location="http://www.innerorbitstudios.com/hector/enmicasa2/"}function gup(e){var a="[\\?&]"+e+"=([^&#]*)",r=new RegExp(a),t=window.location.href,n=r.exec(t);return null==n?"":n[1]}function perfil_usuario(){window.location="perfil_usuario"}function AbrirAlertaPrueba(e,a,r){jQuery.fancybox('<div style="top:20px;" class="content_msg">'+e+"</div>",{height:a,width:r,autoSize:!1})}function validateEmail(e){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(e)}function cargar_empresas_revista(){jQuery.ajax({url:"cargar_empresas_revista_backend",type:"post",data:{hola:"hola"},dataType:"text",success:function(e){var a=JSON.parse(e);switch(a.res){case 0:jQuery("#div_1").html("No se encontraron empresas.");break;case 1:jQuery("#div_1").html(a.empresas_encontradas);break;case 2:window.top.location.href=base_url;break;default:jQuery("#div_1").html("No se encontraron empresas.")}},error:function(e){}})}function agregar_empresa_confirmado(){var e=jQuery("#txt_nombre").val(),a=jQuery("#txt_descripcion").val(),r=jQuery("#slc_tipo_suscripcion").val(),t="",n=!1;jQuery("#div_mensaje2").html(""),""==e&&(n=!0,t+="<div>Ingrese un Nombre</div>"),""==a&&(n=!0,t+="<div>Ingrese una Descripci&oacute;n</div>"),1==n?jQuery("#div_mensaje2").html(ver_mensaje(t,"error")):jQuery.ajax({url:"agregar_empresa_revista",type:"post",data:{nombre:encode(e),descripcion:encode(a),tipo_suscripcion:r},dataType:"json",success:function(e){switch(parseInt(e.res)){case 1:cerrar_fancy(),t="La informaci&oacute;n fue actualizada exitosamente",jQuery("#div_mensaje").html(ver_mensaje(t,"exito")),setTimeout("location.reload()",3e3);break;case 0:cerrar_fancy(),t="Error de Conexi&oacute;n",jQuery("#div_mensaje").html(ver_mensaje(t,"error"))}},error:function(e){}})}function editar_empresa(e){jQuery.ajax({url:"cargar_editar_empresa_revista",type:"post",data:{empresa_revista_id:e},dataType:"json",success:function(e){switch(parseInt(e.res)){case 1:AbrirAlerta(e.empresa_info,"auto","auto");break;case 0:var a="<div>Error de Conexi&oacute;n</div>";jQuery("#div_mensaje").html(ver_mensaje(a,"error"))}}})}function modificar_empresa(e){var a=jQuery("#txt_nombre").val(),r=jQuery("#txt_descripcion").val(),t=jQuery("#slc_tipo_suscripcion").val(),n="",i=!1;jQuery("#div_mensaje2").html(""),""==a&&(i=!0,n+="<div>Ingrese un Nombre</div>"),""==r&&(i=!0,n+="<div>Ingrese la descripci&oacute;n.</div>"),1==i?jQuery("#div_mensaje2").html(ver_mensaje(n,"advertencia")):jQuery.ajax({url:"modificar_empresa_revista",type:"post",data:{empresa_revista_id:e,nombre:encode(a),descripcion:encode(r),tipo_suscripcion:t},dataType:"json",success:function(e){switch(parseInt(e.res)){case 1:cerrar_fancy(),n="La informaci&oacute;n fue actualizada exitosamente",jQuery("#div_mensaje").html(ver_mensaje(n,"exito")),setTimeout("location.reload()",3e3);break;case 0:cerrar_fancy(),n="Error de Conexi&oacute;n",jQuery("#div_mensaje").html(ver_mensaje(n,"error"))}},error:function(e){}})}function eliminar_confirmar_empresa(e){var a='<label>&#191;Est&aacute; seguro que desea eliminar esta empresa?</label></br></br><button type="button" class="btn btn-primary" aria-label="Left Align" id="btn_cancelar" onclick="cerrar_fancy();">Cancelar <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span></button><button type="button" class="btn btn-danger" aria-label="Left Align" id="btn_eliminar" onclick="eliminar_empresa_revista('+e+');">Eliminar <span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>';AbrirAlerta(a,"auto","auto")}function eliminar_empresa_revista(e){jQuery.ajax({url:"eliminar_empresa_revista",type:"post",data:{empresa_revista_id:e},dataType:"json",success:function(e){switch(parseInt(e.res)){case 1:cerrar_fancy(),mensaje="La empresa ha sido eliminada",jQuery("#div_mensaje").html(ver_mensaje(mensaje,"exito")),setTimeout("location.reload()",3e3);break;case 0:cerrar_fancy(),mensaje="Error de Conexi&oacute;n",jQuery("#div_mensaje").html(ver_mensaje(mensaje,"error"))}},error:function(e){}})}function agregar_editar_admin(e){jQuery.ajax({url:"agregar_editar_admin",type:"post",data:{empresa_revista_id:e},dataType:"json",success:function(e){switch(parseInt(e.res)){case 1:AbrirAlerta(e.admin_editar,"auto","auto");break;case 0:AbrirAlerta(e.admin_agregar,"auto","auto")}}})}function agregar_admin(e){var a=jQuery("#txt_correo_admin").val(),r=jQuery("#txt_clave_admin").val(),t="",n=!1;jQuery("#div_mensaje2").html(""),(0==validateEmail(a)||""==a)&&(n=!0,t+="<div>Ingrese un correo v&aacute;lido</div>"),""==r&&(n=!0,t+="<div>Ingrese una Contrase&ntilde;a</div>"),1==n?jQuery("#div_mensaje2").html(ver_mensaje(t,"error")):jQuery.ajax({url:"agregar_admin",type:"post",data:{correo:encode(a),clave:encode(r),empresa_revista_id:e},dataType:"json",success:function(e){switch(parseInt(e.res)){case 1:cerrar_fancy(),t="La informaci&oacute;n fue actualizada exitosamente",jQuery("#div_mensaje").html(ver_mensaje(t,"exito")),setTimeout("location.reload()",300);break;case 0:cerrar_fancy(),t="Error de Conexi&oacute;n",jQuery("#div_mensaje").html(ver_mensaje(t,"error"));break;case 2:t="<div>El correo ingresado acutalmente est&aacute; en uso.</br>Ingrese otro</div>",jQuery("#div_mensaje2").html(ver_mensaje(t,"error")),jQuery("#txt_correo_admin").val(""),jQuery("#txt_correo_admin").focus()}},error:function(e){}})}function modificar_admin(e){var a=jQuery("#txt_correo_admin").val(),r=jQuery("#txt_clave_admin").val(),t="",n=!1;jQuery("#div_mensaje2").html(""),(0==validateEmail(a)||""==a)&&(n=!0,t+="<div>Ingrese un correo v&aacute;lido</div>"),""==r&&(n=!0,t+="<div>Ingrese una Contrase&ntilde;a</div>"),1==n?jQuery("#div_mensaje2").html(ver_mensaje(t,"error")):jQuery.ajax({url:"modificar_admin",type:"post",data:{correo:encode(a),clave:encode(r),admin_empresa_id:e},dataType:"json",success:function(e){switch(parseInt(e.res)){case 1:cerrar_fancy(),t="La informaci&oacute;n fue actualizada exitosamente",jQuery("#div_mensaje").html(ver_mensaje(t,"exito")),setTimeout("location.reload()",300);break;case 0:cerrar_fancy(),t="Error de Conexi&oacute;n",jQuery("#div_mensaje").html(ver_mensaje(t,"error"));break;case 2:t="<div>El correo ingresado acutalmente est&aacute; en uso.</br>Ingrese otro</div>",jQuery("#div_mensaje2").html(ver_mensaje(t,"error")),jQuery("#txt_correo_admin").val(""),jQuery("#txt_correo_admin").focus()}},error:function(e){}})}cargar_empresas_revista();
function agregar_empresa(){
                jQuery.ajax({
                    url:'cargar_agregar_empresa',
                    type: 'post',
                    data: {
                        hola:''
                    },
                    dataType: 'json',
                    success: function(respuesta) {
                        switch(parseInt(respuesta.res)){
                            case 1:
                                var contenido = `<div id="div_mensaje2">
                                                </div>
                                                <table id="tbl_agregar_empresa" class="table table-striped">
                                                    <tr>
                                                        <td>Nombre</td>
                                                        <td><input type="text" value="" class="form-control" id="txt_nombre"></td>
                                                    </tr>
                                                    <tr>
                                                        <td>Descripci&oacute;n</td>
                                                        <td><input type="text" value="" class="form-control" id="txt_descripcion"></td>
                                                    </tr>
                                                    <tr>
                                                        <td>Tipo de Suscripcion</td>
                                                        <td>
                                                            `+respuesta.select_tipo_suscripcion+`
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td>
                                                            <button type="button" class="btn btn-primary" aria-label="Left Align" id="btn_agregar" onclick="agregar_empresa_confirmado();">
                                                                Aceptar
                                                                <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                                                            </button>
                                                            <button type="button" class="btn btn-danger" aria-label="Left Align" id="btn_cancelar" onclick="cerrar_fancy();">
                                                                Cancelar
                                                                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </table>`;
                                AbrirAlerta(contenido, 'auto', 'auto');
                                break;
                            case 0:
                                cerrar_fancy();
                                mensaje = 'Error de Conexi&oacute;n';
                                jQuery('#div_mensaje').html(ver_mensaje(mensaje,'error'));
                                break;
                        }
                    },
                    error: function (error){
                        //alert(error);
                    }
                });
            }